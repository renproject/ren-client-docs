"use strict";(self.webpackChunkren_client_docs=self.webpackChunkren_client_docs||[]).push([[8880],{3905:function(e,t,n){n.d(t,{Zo:function(){return k},kt:function(){return m}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},d=Object.keys(e);for(r=0;r<d.length;r++)n=d[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(r=0;r<d.length;r++)n=d[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=r.createContext({}),s=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},k=function(e){var t=s(e.components);return r.createElement(i.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,d=e.originalType,i=e.parentName,k=l(e,["components","mdxType","originalType","parentName"]),p=s(n),m=a,u=p["".concat(i,".").concat(m)]||p[m]||c[m]||d;return n?r.createElement(u,o(o({ref:t},k),{},{components:n})):r.createElement(u,o({ref:t},k))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var d=n.length,o=new Array(d);o[0]=p;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<d;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},54322:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return i},metadata:function(){return k},toc:function(){return c}});var r=n(87462),a=n(63366),d=(n(67294),n(3905)),o=n(93454),l=["components"],i={title:"DarknodePayment"},s=void 0,k={unversionedId:"darknode-sol/DarknodePayment/DarknodePayment",id:"darknode-sol/DarknodePayment/DarknodePayment",title:"DarknodePayment",description:"Contract: DarknodePayment",source:"@site/contracts/darknode-sol/DarknodePayment/DarknodePayment.mdx",sourceDirName:"darknode-sol/DarknodePayment",slug:"/darknode-sol/DarknodePayment/",permalink:"/ren-client-docs/contracts/darknode-sol/DarknodePayment/",editUrl:"https://github.com/renproject/ren-client-docs/edit/master/contracts/darknode-sol/DarknodePayment/DarknodePayment.mdx",tags:[],version:"current",frontMatter:{title:"DarknodePayment"},sidebar:"contracts",previous:{title:"DarknodePaymentStore",permalink:"/ren-client-docs/contracts/darknode-sol/DarknodePayment/DarknodePaymentStore"},next:{title:"ClaimlessRewardsTokenHandler",permalink:"/ren-client-docs/contracts/darknode-sol/DarknodePayment/ClaimlessRewardsTokenHandler"}},c=[{value:"Contract: <code>DarknodePayment</code>",id:"contract-darknodepayment",children:[],level:2},{value:"Variables",id:"variables",children:[{value:"<strong><code>VERSION</code></strong>: <em><code>string</code></em>",id:"version-string",children:[],level:3},{value:"<strong><code>ETHEREUM</code></strong>: <em><code>address</code></em>",id:"ethereum-address",children:[],level:3},{value:"<strong><code>darknodeRegistry</code></strong>: <em><code>contract DarknodeRegistryLogicV1</code></em>",id:"darknoderegistry-contract-darknoderegistrylogicv1",children:[],level:3},{value:"<strong><code>store</code></strong>: <em><code>contract DarknodePaymentStore</code></em>",id:"store-contract-darknodepaymentstore",children:[],level:3},{value:"<strong><code>cycleChanger</code></strong>: <em><code>address</code></em>",id:"cyclechanger-address",children:[],level:3},{value:"<strong><code>currentCycle</code></strong>: <em><code>uint256</code></em>",id:"currentcycle-uint256",children:[],level:3},{value:"<strong><code>previousCycle</code></strong>: <em><code>uint256</code></em>",id:"previouscycle-uint256",children:[],level:3},{value:"<strong><code>pendingTokens</code></strong>: <em><code>address[]</code></em>",id:"pendingtokens-address",children:[],level:3},{value:"<strong><code>registeredTokens</code></strong>: <em><code>address[]</code></em>",id:"registeredtokens-address",children:[],level:3},{value:"<strong><code>registeredTokenIndex</code></strong>: <em><code>mapping(address =&gt; uint256)</code></em>",id:"registeredtokenindex-mappingaddress--uint256",children:[],level:3},{value:"<strong><code>unclaimedRewards</code></strong>: <em><code>mapping(address =&gt; uint256)</code></em>",id:"unclaimedrewards-mappingaddress--uint256",children:[],level:3},{value:"<strong><code>previousCycleRewardShare</code></strong>: <em><code>mapping(address =&gt; uint256)</code></em>",id:"previouscyclerewardshare-mappingaddress--uint256",children:[],level:3},{value:"<strong><code>cycleStartTime</code></strong>: <em><code>uint256</code></em>",id:"cyclestarttime-uint256",children:[],level:3},{value:"<strong><code>nextCyclePayoutPercent</code></strong>: <em><code>uint256</code></em>",id:"nextcyclepayoutpercent-uint256",children:[],level:3},{value:"<strong><code>currentCyclePayoutPercent</code></strong>: <em><code>uint256</code></em>",id:"currentcyclepayoutpercent-uint256",children:[],level:3},{value:"<strong><code>rewardClaimed</code></strong>: <em><code>mapping(address =&gt; mapping(uint256 =&gt; bool))</code></em>",id:"rewardclaimed-mappingaddress--mappinguint256--bool",children:[],level:3}],level:2},{value:"Modifiers",id:"modifiers",children:[{value:"<code>onlyDarknode(address _darknode)</code>",id:"onlydarknodeaddress-_darknode",children:[],level:3},{value:"<code>validPercent(uint256 _percent)</code>",id:"validpercentuint256-_percent",children:[],level:3},{value:"<code>onlyCycleChanger()</code>",id:"onlycyclechanger",children:[],level:3}],level:2},{value:"Functions",id:"functions",children:[{value:"<strong><code>constructor</code></strong> <em><code>(string _VERSION, contract DarknodeRegistryLogicV1 _darknodeRegistry, contract DarknodePaymentStore _darknodePaymentStore, uint256 _cyclePayoutPercent)</code></em> (public)",id:"constructor-string-_version-contract-darknoderegistrylogicv1-_darknoderegistry-contract-darknodepaymentstore-_darknodepaymentstore-uint256-_cyclepayoutpercent-public",children:[],level:3},{value:"<strong><code>updateDarknodeRegistry</code></strong> <em><code>(contract DarknodeRegistryLogicV1 _darknodeRegistry)</code></em> (external)",id:"updatedarknoderegistry-contract-darknoderegistrylogicv1-_darknoderegistry-external",children:[],level:3},{value:"<strong><code>withdraw</code></strong> <em><code>(address _darknode, address _token)</code></em> (public)",id:"withdraw-address-_darknode-address-_token-public",children:[],level:3},{value:"<strong><code>withdrawMultiple</code></strong> <em><code>(address[] _darknodes, address[] _tokens)</code></em> (external)",id:"withdrawmultiple-address-_darknodes-address-_tokens-external",children:[],level:3},{value:"<strong><code>fallback</code></strong> <em><code>()</code></em> (external)",id:"fallback--external",children:[],level:3},{value:"<strong><code>currentCycleRewardPool</code></strong> <em><code>(address _token) \u2192 uint256</code></em> (external)",id:"currentcyclerewardpool-address-_token--uint256-external",children:[],level:3},{value:"<strong><code>darknodeBalances</code></strong> <em><code>(address _darknodeID, address _token) \u2192 uint256</code></em> (external)",id:"darknodebalances-address-_darknodeid-address-_token--uint256-external",children:[],level:3},{value:"<strong><code>changeCycle</code></strong> <em><code>() \u2192 uint256</code></em> (external)",id:"changecycle---uint256-external",children:[],level:3},{value:"<strong><code>deposit</code></strong> <em><code>(uint256 _value, address _token)</code></em> (external)",id:"deposit-uint256-_value-address-_token-external",children:[],level:3},{value:"<strong><code>forward</code></strong> <em><code>(address _token)</code></em> (external)",id:"forward-address-_token-external",children:[],level:3},{value:"<strong><code>claim</code></strong> <em><code>(address _darknode)</code></em> (external)",id:"claim-address-_darknode-external",children:[],level:3},{value:"<strong><code>registerToken</code></strong> <em><code>(address _token)</code></em> (external)",id:"registertoken-address-_token-external",children:[],level:3},{value:"<strong><code>tokenPendingRegistration</code></strong> <em><code>(address _token) \u2192 bool</code></em> (public)",id:"tokenpendingregistration-address-_token--bool-public",children:[],level:3},{value:"<strong><code>deregisterToken</code></strong> <em><code>(address _token)</code></em> (external)",id:"deregistertoken-address-_token-external",children:[],level:3},{value:"<strong><code>updateCycleChanger</code></strong> <em><code>(address _addr)</code></em> (external)",id:"updatecyclechanger-address-_addr-external",children:[],level:3},{value:"<strong><code>updatePayoutPercentage</code></strong> <em><code>(uint256 _percent)</code></em> (external)",id:"updatepayoutpercentage-uint256-_percent-external",children:[],level:3},{value:"<strong><code>transferStoreOwnership</code></strong> <em><code>(contract DarknodePayment _newOwner)</code></em> (external)",id:"transferstoreownership-contract-darknodepayment-_newowner-external",children:[],level:3},{value:"<strong><code>claimStoreOwnership</code></strong> <em><code>()</code></em> (external)",id:"claimstoreownership--external",children:[],level:3}],level:2},{value:"Events",id:"events",children:[{value:"<strong><code>LogDarknodeClaim</code></strong> <em><code>(address _darknode, uint256 _cycle)</code></em>",id:"logdarknodeclaim-address-_darknode-uint256-_cycle",children:[],level:3},{value:"<strong><code>LogPaymentReceived</code></strong> <em><code>(address _payer, address _token, uint256 _amount)</code></em>",id:"logpaymentreceived-address-_payer-address-_token-uint256-_amount",children:[],level:3},{value:"<strong><code>LogDarknodeWithdrew</code></strong> <em><code>(address _darknodeOperator, address _darknodeID, address _token, uint256 _value)</code></em>",id:"logdarknodewithdrew-address-_darknodeoperator-address-_darknodeid-address-_token-uint256-_value",children:[],level:3},{value:"<strong><code>LogPayoutPercentChanged</code></strong> <em><code>(uint256 _newPercent, uint256 _oldPercent)</code></em>",id:"logpayoutpercentchanged-uint256-_newpercent-uint256-_oldpercent",children:[],level:3},{value:"<strong><code>LogCycleChangerChanged</code></strong> <em><code>(address _newCycleChanger, address _oldCycleChanger)</code></em>",id:"logcyclechangerchanged-address-_newcyclechanger-address-_oldcyclechanger",children:[],level:3},{value:"<strong><code>LogTokenRegistered</code></strong> <em><code>(address _token)</code></em>",id:"logtokenregistered-address-_token",children:[],level:3},{value:"<strong><code>LogTokenDeregistered</code></strong> <em><code>(address _token)</code></em>",id:"logtokenderegistered-address-_token",children:[],level:3},{value:"<strong><code>LogDarknodeRegistryUpdated</code></strong> <em><code>(contract DarknodeRegistryLogicV1 _previousDarknodeRegistry, contract DarknodeRegistryLogicV1 _nextDarknodeRegistry)</code></em>",id:"logdarknoderegistryupdated-contract-darknoderegistrylogicv1-_previousdarknoderegistry-contract-darknoderegistrylogicv1-_nextdarknoderegistry",children:[],level:3}],level:2}],p={toc:c};function m(e){var t=e.components,n=(0,a.Z)(e,l);return(0,d.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,d.kt)(o.G,{type:o.e.Reference,mdxType:"DocTag"}),(0,d.kt)("h2",{id:"contract-darknodepayment"},"Contract: ",(0,d.kt)("inlineCode",{parentName:"h2"},"DarknodePayment")),(0,d.kt)("p",null,"DarknodePayment is responsible for paying off darknodes for their\ncomputation."),(0,d.kt)("p",null,"Inherits from:"),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"Claimable")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"Ownable")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"Context")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"Initializable"))),(0,d.kt)("hr",null),(0,d.kt)("br",null),(0,d.kt)("h2",{id:"variables"},"Variables"),(0,d.kt)("h3",{id:"version-string"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"VERSION")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"string"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"ethereum-address"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"ETHEREUM")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"address"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"darknoderegistry-contract-darknoderegistrylogicv1"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"darknodeRegistry")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"contract DarknodeRegistryLogicV1"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"store-contract-darknodepaymentstore"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"store")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"contract DarknodePaymentStore"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"cyclechanger-address"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"cycleChanger")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"address"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"currentcycle-uint256"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"currentCycle")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"uint256"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"previouscycle-uint256"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"previousCycle")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"uint256"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"pendingtokens-address"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"pendingTokens")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"address[]"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"registeredtokens-address"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"registeredTokens")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"address[]"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"registeredtokenindex-mappingaddress--uint256"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"registeredTokenIndex")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"mapping(address => uint256)"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"unclaimedrewards-mappingaddress--uint256"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"unclaimedRewards")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"mapping(address => uint256)"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"previouscyclerewardshare-mappingaddress--uint256"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"previousCycleRewardShare")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"mapping(address => uint256)"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"cyclestarttime-uint256"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"cycleStartTime")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"uint256"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"nextcyclepayoutpercent-uint256"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"nextCyclePayoutPercent")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"uint256"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"currentcyclepayoutpercent-uint256"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"currentCyclePayoutPercent")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"uint256"))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"rewardclaimed-mappingaddress--mappinguint256--bool"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"rewardClaimed")),": ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"mapping(address => mapping(uint256 => bool))"))),(0,d.kt)("hr",null),(0,d.kt)("br",null),(0,d.kt)("h2",{id:"modifiers"},"Modifiers"),(0,d.kt)("h3",{id:"onlydarknodeaddress-_darknode"},(0,d.kt)("inlineCode",{parentName:"h3"},"onlyDarknode(address _darknode)")),(0,d.kt)("p",null,"Restrict a function registered dark nodes to call a function."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"validpercentuint256-_percent"},(0,d.kt)("inlineCode",{parentName:"h3"},"validPercent(uint256 _percent)")),(0,d.kt)("p",null,"Restrict a function to have a valid percentage."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"onlycyclechanger"},(0,d.kt)("inlineCode",{parentName:"h3"},"onlyCycleChanger()")),(0,d.kt)("p",null,"Restrict a function to be called by cycleChanger."),(0,d.kt)("hr",null),(0,d.kt)("br",null),(0,d.kt)("h2",{id:"functions"},"Functions"),(0,d.kt)("h3",{id:"constructor-string-_version-contract-darknoderegistrylogicv1-_darknoderegistry-contract-darknodepaymentstore-_darknodepaymentstore-uint256-_cyclepayoutpercent-public"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"constructor"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(string _VERSION, contract DarknodeRegistryLogicV1 _darknodeRegistry, contract DarknodePaymentStore _darknodePaymentStore, uint256 _cyclePayoutPercent)"))," (public)"),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_VERSION"),": A string defining the contract version.")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_darknodeRegistry"),": The address of the DarknodeRegistry contract.")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_darknodePaymentStore"),": The address of the DarknodePaymentStore\ncontract."))),(0,d.kt)("p",null,"The contract constructor. Starts the current cycle using the\ntime of deploy."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"updatedarknoderegistry-contract-darknoderegistrylogicv1-_darknoderegistry-external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"updateDarknodeRegistry"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(contract DarknodeRegistryLogicV1 _darknodeRegistry)"))," (external)"),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"_darknodeRegistry"),": The address of the Darknode Registry\ncontract.")),(0,d.kt)("p",null,"Allows the contract owner to update the address of the\ndarknode registry contract."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"withdraw-address-_darknode-address-_token-public"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"withdraw"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _darknode, address _token)"))," (public)"),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_darknode"),": The address of the darknode.")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_token"),": Which token to transfer."))),(0,d.kt)("p",null,"Transfers the funds allocated to the darknode to the darknode\nowner."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"withdrawmultiple-address-_darknodes-address-_tokens-external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"withdrawMultiple"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address[] _darknodes, address[] _tokens)"))," (external)"),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"fallback--external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"fallback"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"()"))," (external)"),(0,d.kt)("p",null,"Forward all payments to the DarknodePaymentStore."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"currentcyclerewardpool-address-_token--uint256-external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"currentCycleRewardPool"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _token) \u2192 uint256"))," (external)"),(0,d.kt)("p",null,"The current balance of the contract available as reward for the\ncurrent cycle."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"darknodebalances-address-_darknodeid-address-_token--uint256-external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"darknodeBalances"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _darknodeID, address _token) \u2192 uint256"))," (external)"),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"changecycle---uint256-external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"changeCycle"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"() \u2192 uint256"))," (external)"),(0,d.kt)("p",null,"Changes the current cycle."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"deposit-uint256-_value-address-_token-external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"deposit"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(uint256 _value, address _token)"))," (external)"),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_value"),": The amount of token deposit in the token's smallest unit.")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_token"),": The token address."))),(0,d.kt)("p",null,"Deposits token into the contract to be paid to the Darknodes."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"forward-address-_token-external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"forward"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _token)"))," (external)"),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"_token"),": The token address.")),(0,d.kt)("p",null,"Forwards any tokens that have been sent to the DarknodePayment contract\nprobably by mistake, to the DarknodePaymentStore."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"claim-address-_darknode-external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"claim"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _darknode)"))," (external)"),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"_darknode"),": The address of the darknode to claim.")),(0,d.kt)("p",null,"Claims the rewards allocated to the darknode last epoch."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"registertoken-address-_token-external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"registerToken"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _token)"))," (external)"),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"_token"),": The address of the token to be registered.")),(0,d.kt)("p",null,"Adds tokens to be payable. Registration is pending until next\ncycle."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"tokenpendingregistration-address-_token--bool-public"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"tokenPendingRegistration"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _token) \u2192 bool"))," (public)"),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"deregistertoken-address-_token-external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"deregisterToken"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _token)"))," (external)"),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"_token"),": The address of the token to be deregistered.")),(0,d.kt)("p",null,"Removes a token from the list of supported tokens.\nDeregistration is pending until next cycle."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"updatecyclechanger-address-_addr-external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"updateCycleChanger"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _addr)"))," (external)"),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"_addr"),": The new CycleChanger contract address.")),(0,d.kt)("p",null,"Updates the CycleChanger contract address."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"updatepayoutpercentage-uint256-_percent-external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"updatePayoutPercentage"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(uint256 _percent)"))," (external)"),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"_percent"),": The percentage of payout for darknodes.")),(0,d.kt)("p",null,"Updates payout percentage."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"transferstoreownership-contract-darknodepayment-_newowner-external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"transferStoreOwnership"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(contract DarknodePayment _newOwner)"))," (external)"),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"_newOwner"),": The address to transfer the ownership to.")),(0,d.kt)("p",null,"Allows the contract owner to initiate an ownership transfer of\nthe DarknodePaymentStore."),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"claimstoreownership--external"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"claimStoreOwnership"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"()"))," (external)"),(0,d.kt)("p",null,"Claims ownership of the store passed in to the constructor.\n",(0,d.kt)("inlineCode",{parentName:"p"},"transferStoreOwnership")," must have previously been called when\ntransferring from another DarknodePaymentStore."),(0,d.kt)("hr",null),(0,d.kt)("br",null),(0,d.kt)("h2",{id:"events"},"Events"),(0,d.kt)("h3",{id:"logdarknodeclaim-address-_darknode-uint256-_cycle"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"LogDarknodeClaim"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _darknode, uint256 _cycle)"))),(0,d.kt)("p",null,"Emitted when a darknode claims their share of reward."),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_darknode"),": The darknode which claimed.")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_cycle"),": The cycle that the darknode claimed for."))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"logpaymentreceived-address-_payer-address-_token-uint256-_amount"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"LogPaymentReceived"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _payer, address _token, uint256 _amount)"))),(0,d.kt)("p",null,"Emitted when someone pays the DarknodePayment contract."),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_payer"),": The darknode which claimed.")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_amount"),": The cycle that the darknode claimed for.")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_token"),": The address of the token that was transferred."))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"logdarknodewithdrew-address-_darknodeoperator-address-_darknodeid-address-_token-uint256-_value"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"LogDarknodeWithdrew"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _darknodeOperator, address _darknodeID, address _token, uint256 _value)"))),(0,d.kt)("p",null,"Emitted when a darknode calls withdraw."),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_darknodeOperator"),": The address of the darknode's operator.")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_darknodeID"),": The address of the darknode which withdrew.")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_value"),": The amount of DAI withdrawn.")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_token"),": The address of the token that was withdrawn."))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"logpayoutpercentchanged-uint256-_newpercent-uint256-_oldpercent"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"LogPayoutPercentChanged"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(uint256 _newPercent, uint256 _oldPercent)"))),(0,d.kt)("p",null,"Emitted when the payout percent changes."),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_newPercent"),": The new percent.")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_oldPercent"),": The old percent."))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"logcyclechangerchanged-address-_newcyclechanger-address-_oldcyclechanger"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"LogCycleChangerChanged"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _newCycleChanger, address _oldCycleChanger)"))),(0,d.kt)("p",null,"Emitted when the CycleChanger address changes."),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_newCycleChanger"),": The new CycleChanger.")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_oldCycleChanger"),": The old CycleChanger."))),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"logtokenregistered-address-_token"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"LogTokenRegistered"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _token)"))),(0,d.kt)("p",null,"Emitted when a new token is registered."),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"_token"),": The token that was registered.")),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"logtokenderegistered-address-_token"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"LogTokenDeregistered"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(address _token)"))),(0,d.kt)("p",null,"Emitted when a token is deregistered."),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("inlineCode",{parentName:"li"},"_token"),": The token that was deregistered.")),(0,d.kt)("hr",null),(0,d.kt)("h3",{id:"logdarknoderegistryupdated-contract-darknoderegistrylogicv1-_previousdarknoderegistry-contract-darknoderegistrylogicv1-_nextdarknoderegistry"},(0,d.kt)("strong",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"strong"},"LogDarknodeRegistryUpdated"))," ",(0,d.kt)("em",{parentName:"h3"},(0,d.kt)("inlineCode",{parentName:"em"},"(contract DarknodeRegistryLogicV1 _previousDarknodeRegistry, contract DarknodeRegistryLogicV1 _nextDarknodeRegistry)"))),(0,d.kt)("p",null,"Emitted when the DarknodeRegistry is updated."),(0,d.kt)("p",null,(0,d.kt)("strong",{parentName:"p"},"Params")),(0,d.kt)("ul",null,(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_previousDarknodeRegistry"),": The address of the old registry.")),(0,d.kt)("li",{parentName:"ul"},(0,d.kt)("p",{parentName:"li"},(0,d.kt)("inlineCode",{parentName:"p"},"_nextDarknodeRegistry"),": The address of the new registry."))),(0,d.kt)("hr",null))}m.isMDXComponent=!0},93454:function(e,t,n){n.d(t,{G:function(){return l},e:function(){return a}});var r,a,d=n(67294);!function(e){e.Tutorial="Tutorial",e.HowTo="How To",e.Reference="Reference",e.Explanation="Explanation"}(a||(a={}));var o=((r={})[a.Tutorial]="#b48ead",r[a.HowTo]="#69a8b9",r[a.Reference]="#bf616a",r[a.Explanation]="#d2b06c",r),l=function(e){var t=e.type,n=e.marginBottom;return d.createElement(d.Fragment,null,d.createElement("span",{style:{border:"2px solid "+o[t]||0,borderRadius:"5px",color:o[t]||"orange",padding:"0.1rem 0.4rem",marginBottom:void 0!==n?n:30,display:"inline-block"}},String(t)))}}}]);